# HTTP Inspector è·¯çº¿å›¾

## å½“å‰çŠ¶æ€ (v1.3)

### å·²å®ç°
- âœ… HTTP/HTTPS è¯·æ±‚æ•è·ï¼ˆURLProtocol + Method Swizzlingï¼‰
- âœ… URLSessionTaskMetrics æ€§èƒ½æ—¶é—´çº¿
- âœ… è¯·æ±‚/å“åº”å¤´å’Œ Body å®Œæ•´å†…å®¹
- âœ… åˆ†é¡µæµè§ˆå’Œå®æ—¶äº‹ä»¶æµ
- âœ… é«˜çº§æœç´¢è¯­æ³•ï¼ˆ`method:POST status:4xx duration:>500ms`ï¼‰
- âœ… è¯·æ±‚ Diff å¯¹æ¯”
- âœ… cURL å¯¼å‡º
- âœ… HAR å¯¼å‡º
- âœ… è¯·æ±‚é‡æ”¾
- âœ… è¯·æ±‚æ”¶è—
- âœ… æ‰¹é‡æ“ä½œï¼ˆé€‰æ‹©ã€åˆ é™¤ã€æ”¶è—ã€å¯¼å‡ºï¼‰
- âœ… Protobuf è§£æï¼ˆWire Format è‡ªåŠ¨æ£€æµ‹ï¼‰
- âœ… å›¾ç‰‡å“åº”å†…è”é¢„è§ˆ
- âœ… **é€‰ä¸­æ ·å¼ä¼˜åŒ–** - å®è‰²ä¸»é¢˜å—é«˜äº®
- âœ… **è™šæ‹Ÿæ»šåŠ¨** - æ”¯æŒ 10,000+ è¯·æ±‚æµç•…æµè§ˆ
- âœ… **è¯·æ±‚åˆ†ç»„** - æŒ‰åŸŸå/è·¯å¾„åˆ†ç»„æ˜¾ç¤º

---

## Phase 1: æ€§èƒ½ä¼˜åŒ– (ä¼˜å…ˆçº§: ğŸ”´ High) âœ… å·²å®Œæˆ

### 1.1 è™šæ‹Ÿæ»šåŠ¨ âœ…

**ç›®æ ‡**: æ”¯æŒ 10,000+ è¯·æ±‚æµç•…æµè§ˆ

**å½“å‰é—®é¢˜**:
- è¯·æ±‚é‡å¤§æ—¶ DOM èŠ‚ç‚¹è¿‡å¤š
- æ»šåŠ¨å¡é¡¿

**å®ç°æ–¹æ¡ˆ**:
```tsx
// ä½¿ç”¨ react-virtual æˆ– react-window
import { useVirtualizer } from '@tanstack/react-virtual'

function HTTPEventTable({ events }) {
  const virtualizer = useVirtualizer({
    count: events.length,
    getScrollElement: () => containerRef.current,
    estimateSize: () => 48, // è¡Œé«˜
    overscan: 10, // é¢„æ¸²æŸ“è¡Œæ•°
  })
}
```

**é¢„ä¼°**: 3 å¤©

---

### 1.2 å¢é‡åŠ è½½

**ç›®æ ‡**: é¦–å±å¿«é€ŸåŠ è½½ï¼Œæ»šåŠ¨æ—¶æŒ‰éœ€åŠ è½½æ›´å¤š

**å®ç°æœºåˆ¶**:
```typescript
interface PaginationState {
  cursor: string | null  // æ¸¸æ ‡åˆ†é¡µ
  hasMore: boolean
  isLoading: boolean
}

// API æ”¯æŒæ¸¸æ ‡åˆ†é¡µ
GET /api/devices/{id}/http?cursor=xxx&limit=50
```

**é¢„ä¼°**: 2 å¤©

---

### 1.3 è¯·æ±‚ç¼“å­˜

**ç›®æ ‡**: ç¼“å­˜è¯·æ±‚è¯¦æƒ…ï¼Œé¿å…é‡å¤è¯·æ±‚

**å®ç°æ–¹æ¡ˆ**:
```typescript
// ä½¿ç”¨ zustand + persist
const useHTTPCache = create(
  persist(
    (set, get) => ({
      detailCache: new Map<string, HTTPEventDetail>(),
      getDetail: async (id: string) => {
        if (get().detailCache.has(id)) {
          return get().detailCache.get(id)
        }
        const detail = await api.getHTTPEventDetail(id)
        set((state) => ({
          detailCache: new Map(state.detailCache).set(id, detail)
        }))
        return detail
      }
    }),
    { name: 'http-cache' }
  )
)
```

**é¢„ä¼°**: 1 å¤©

---

## Phase 2: åŠŸèƒ½å¢å¼º (ä¼˜å…ˆçº§: ğŸŸ¡ Medium)

### 2.1 è¯·æ±‚åˆ†ç»„

**ç›®æ ‡**: æŒ‰åŸŸåã€è·¯å¾„å‰ç¼€ã€æ—¶é—´æ®µåˆ†ç»„æ˜¾ç¤º

**UI è®¾è®¡**:
```
â”Œâ”€ api.example.com (45 requests) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â””â”€ /v1/users (12)                              â”‚
â”‚     â”œâ”€ GET /v1/users/profile  200  150ms        â”‚
â”‚     â””â”€ POST /v1/users/login   200  320ms        â”‚
â”‚  â””â”€ /v1/orders (33)                             â”‚
â”‚     â”œâ”€ GET /v1/orders         200  280ms        â”‚
â”‚     â””â”€ ...                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é¢„ä¼°**: 3 å¤©

---

### 2.2 è¯·æ±‚æ ‡ç­¾

**ç›®æ ‡**: ç”¨æˆ·è‡ªå®šä¹‰æ ‡ç­¾ï¼Œæ–¹ä¾¿åˆ†ç±»å’Œæœç´¢

**åŠŸèƒ½**:
- æ·»åŠ /åˆ é™¤æ ‡ç­¾
- æŒ‰æ ‡ç­¾ç­›é€‰
- æœç´¢è¯­æ³• `tag:auth`

**æ•°æ®ç»“æ„**:
```typescript
interface HTTPEvent {
  tags: string[]  // æ–°å¢
}
```

**é¢„ä¼°**: 2 å¤©

---

### 2.3 è¯·æ±‚æ¨¡æ¿

**ç›®æ ‡**: ä¿å­˜å¸¸ç”¨è¯·æ±‚ä¸ºæ¨¡æ¿ï¼Œå¿«é€Ÿé‡æ”¾

**åŠŸèƒ½**:
- ä¿å­˜è¯·æ±‚ä¸ºæ¨¡æ¿
- ç¼–è¾‘æ¨¡æ¿å‚æ•°
- ä¸€é”®é‡æ”¾æ¨¡æ¿

**é¢„ä¼°**: 2 å¤©

---

### 2.4 å“åº”ä½“å¯¹æ¯”

**ç›®æ ‡**: å¯¹æ¯”ä¸¤ä¸ªè¯·æ±‚çš„å“åº”ä½“å·®å¼‚

**å®ç°**:
```tsx
// ä½¿ç”¨ diff2html æˆ– monaco-editor
import { Diff2Html } from 'diff2html'

function ResponseDiff({ left, right }) {
  const diff = createTwoFilesPatch('left', 'right', left, right)
  return <Diff2Html diff={diff} />
}
```

**é¢„ä¼°**: 2 å¤©

---

## Phase 3: é«˜çº§åˆ†æ (ä¼˜å…ˆçº§: ğŸ”µ Low)

### 3.1 æ€§èƒ½åˆ†æé¢æ¿

**ç›®æ ‡**: è¯·æ±‚æ€§èƒ½ç»Ÿè®¡å’Œè¶‹åŠ¿åˆ†æ

**æŒ‡æ ‡**:
- å¹³å‡å“åº”æ—¶é—´
- P50/P90/P99 å»¶è¿Ÿ
- é”™è¯¯ç‡
- è¯·æ±‚é‡è¶‹åŠ¿

**UI**:
```
â”Œâ”€ æ€§èƒ½æ¦‚è§ˆ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¹³å‡å“åº”: 245ms   é”™è¯¯ç‡: 2.3%   è¯·æ±‚é‡: 1,234â”‚
â”‚                                                 â”‚
â”‚  [å“åº”æ—¶é—´è¶‹åŠ¿å›¾]                              â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚  10:00   10:30   11:00   11:30   12:00         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é¢„ä¼°**: 4 å¤©

---

### 3.2 è¯·æ±‚ä¾èµ–åˆ†æ

**ç›®æ ‡**: å¯è§†åŒ–è¯·æ±‚ä¹‹é—´çš„ä¾èµ–å…³ç³»

**åœºæ™¯**: é¡µé¢åŠ è½½æ—¶å¤šä¸ªè¯·æ±‚çš„å…ˆåé¡ºåº

**UI**:
```
  /api/config â”€â”€â”€â”€â”¬â”€â”€> /api/user â”€â”€â”€â”€â”
                  â”‚                   â”‚
                  â””â”€â”€> /api/feature   â”œâ”€â”€> /api/home
                                      â”‚
          /api/session â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é¢„ä¼°**: 5 å¤©

---

### 3.3 å¼‚å¸¸æ£€æµ‹

**ç›®æ ‡**: è‡ªåŠ¨è¯†åˆ«å¼‚å¸¸è¯·æ±‚æ¨¡å¼

**æ£€æµ‹è§„åˆ™**:
- å“åº”æ—¶é—´çªå¢ï¼ˆ> 2x å†å²å‡å€¼ï¼‰
- é”™è¯¯ç‡çªå¢
- è¯·æ±‚é‡å¼‚å¸¸ï¼ˆ> 3x æˆ– < 0.3xï¼‰

**é¢„ä¼°**: 3 å¤©

---

## Phase 4: å¯¼å‡ºå¢å¼º (ä¼˜å…ˆçº§: ğŸ”µ Low)

### 4.1 Postman å¯¼å‡º

**ç›®æ ‡**: å¯¼å‡ºä¸º Postman Collection

```json
{
  "info": { "name": "Exported Collection" },
  "item": [
    {
      "name": "GET /api/users",
      "request": { "method": "GET", "url": "..." }
    }
  ]
}
```

**é¢„ä¼°**: 1 å¤©

---

### 4.2 OpenAPI ç”Ÿæˆ

**ç›®æ ‡**: æ ¹æ®æ•è·çš„è¯·æ±‚è‡ªåŠ¨ç”Ÿæˆ OpenAPI è§„èŒƒ

**è¾“å‡º**:
```yaml
openapi: 3.0.0
paths:
  /api/users:
    get:
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'
```

**é¢„ä¼°**: 4 å¤©

---

## ğŸ“Š ä¼˜å…ˆçº§æ€»è§ˆ

| é˜¶æ®µ | åŠŸèƒ½ | é¢„ä¼° | çŠ¶æ€ |
|------|------|------|------|
| **Phase 1** | è™šæ‹Ÿæ»šåŠ¨ | 3 å¤© | å¾…å¼€å‘ |
| | å¢é‡åŠ è½½ | 2 å¤© | å¾…å¼€å‘ |
| | è¯·æ±‚ç¼“å­˜ | 1 å¤© | å¾…å¼€å‘ |
| **Phase 2** | è¯·æ±‚åˆ†ç»„ | 3 å¤© | å¾…å¼€å‘ |
| | è¯·æ±‚æ ‡ç­¾ | 2 å¤© | å¾…å¼€å‘ |
| | è¯·æ±‚æ¨¡æ¿ | 2 å¤© | å¾…å¼€å‘ |
| | å“åº”ä½“å¯¹æ¯” | 2 å¤© | å¾…å¼€å‘ |
| **Phase 3** | æ€§èƒ½åˆ†æé¢æ¿ | 4 å¤© | å¾…å¼€å‘ |
| | è¯·æ±‚ä¾èµ–åˆ†æ | 5 å¤© | å¾…å¼€å‘ |
| | å¼‚å¸¸æ£€æµ‹ | 3 å¤© | å¾…å¼€å‘ |
| **Phase 4** | Postman å¯¼å‡º | 1 å¤© | å¾…å¼€å‘ |
| | OpenAPI ç”Ÿæˆ | 4 å¤© | å¾…å¼€å‘ |
